# This workflow uses actions that are not certified by GitHub.  They are
# provided by a third-party and are governed by separate terms of service,
# privacy policy, and support documentation.
#
# use with precaution


name: "DO Droplet Build"
on:
  workflow_dispatch:

jobs: 
  build:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout files    
        uses: actions/checkout@v3

      - name: Get Owner and Repo Name
        run: echo "Owner & Repo - ${{ github.repository }}"

      - name: Get Repo Owner
        run: echo "Owner - ${{ github.repository_owner }}"

      - name: Get Repo Name
        id: repoName
        run: echo "REPO_NAME = ${{ github.event.repository.name }}" >> $GITHUB_OUTPUT

      - name: Install doctl
        uses: digitalocean/action-doctl@v2
        with:
          token: ${{ secrets.DIGITALOCEAN_ACCESS_TOKEN }}
         
#      - name: Provision Droplet and deploy container
#        id: droplet
#        run: >-
#          echo "DROPLET_ID = $(
#            doctl compute droplet create "${{ github.event.repository.name }}" --image docker-22-04 --size s-1vcpu-1gb --region nyc3 --user-data-file --wait --no-header --format=ID
#          )" >> $GITHUB_OUTPUT


#      - name: Assign Droplet to Project
#        run: doctl projects resources assign ${PROJECT_ID} --resource=do:droplet:"${{ steps.droplet.outputs.DROPLET_ID }}"
